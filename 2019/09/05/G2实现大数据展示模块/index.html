

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Daniel Chan">
  <meta name="keywords" content="">
  
    <meta name="description" content="一次恶补正太分布函数和用G2 api画图的崎岖历程">
<meta property="og:type" content="article">
<meta property="og:title" content="G2实现大数据展示模块">
<meta property="og:url" content="http://example.com/2019/09/05/G2%E5%AE%9E%E7%8E%B0%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA%E6%A8%A1%E5%9D%97/index.html">
<meta property="og:site_name" content="Danni.cool - Daniel&#39;s Blog">
<meta property="og:description" content="一次恶补正太分布函数和用G2 api画图的崎岖历程">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/da30d0efd7373b2f8b5e0e19d4a1981c.jpg">
<meta property="article:published_time" content="2019-09-05T16:00:00.000Z">
<meta property="article:modified_time" content="2024-05-05T16:01:00.000Z">
<meta property="article:author" content="Daniel Chan">
<meta property="article:tag" content="G2">
<meta property="article:tag" content="Canvas">
<meta property="article:tag" content="SVG">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/da30d0efd7373b2f8b5e0e19d4a1981c.jpg">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>G2实现大数据展示模块 - Danni.cool - Daniel&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.7","typing":{"enable":false,"typeSpeed":35,"cursorChar":"_","loop":false,"scope":["post"]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":"#"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"javascript"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":"GTM-M5CB4JM6"},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=GTM-M5CB4JM6", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', 'GTM-M5CB4JM6');
        });
      }
    </script>
  

  

  

  

  



  
<meta name="generator" content="Hexo 7.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 45vh;">
  <nav
  id="navbar"
  class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"
>
  <div class="container">
    <a class="navbar-brand" href="/">
      <!-- <strong>Danni.cool</strong> -->
      <svg
        version="1.1"
        width="120"
        height="34"
        viewBox="0 0 2000 439"
        xmlns="http://www.w3.org/2000/svg"
      >
        <defs>
          <g id="marketing-masks">
            <mask id="mask-marketing-M">
              <path
                class="styles_logoMask styles_doSvgAnimate"
                stroke-width="65"
                d="M 125.12546,243.55972 C 90.163936,244.5634 61.057209,270.4918 61.057209,270.4918 l -30.779524,67.36067 8.531282,62.71899 25.426563,18.83457 60.22081,-24.62517 34.79425,-65.57377 36.8016,-64.90465 25.42657,-62.22817 c 0,0 18.06624,-68.25025 21.41184,-72.26497 3.3456,-4.01472 7.36032,-52.191368 7.36032,-52.191368 l -20.0736,-54.867848 c 0,0 -31.44865,6.022081 -33.45601,8.698561 -2.00736,2.67648 -20.74272,46.838408 -23.4192,51.522248 -2.67648,4.683841 -21.91332,83.965087 -21.41185,98.360657 0.41867,12.01848 10.70592,86.31649 -13.3824,80.29441 -3.24571,-0.81143 7.36032,90.33122 7.36032,90.33122 l 21.41185,60.22081 39.47808,4.01472 36.80161,-21.41185 c 0,0 16.05888,-40.1472 18.06624,-46.8384 2.00736,-6.69121 18.06624,-64.23553 20.74273,-67.58114 2.67648,-3.3456 33.456,-27.43392 33.456,-27.43392 l 40.81633,-12.71328 13.3824,6.02208 -75.61057,26.7648 c 0,0 -16.91263,67.18526 -14.05153,68.91937 23.99494,14.54325 -10.29544,71.78742 -4.68384,74.27234 6.02572,2.6683 48.84577,-4.01472 48.84577,-4.01472 l 41.48545,-34.12513 c 0,0 -6.6912,-73.60321 18.73536,-40.81633 7.73686,9.97647 27.43392,-82.97088 27.43392,-82.97088 l -34.12512,-8.02945 4.01472,88.32385 8.69856,72.26498 c 0,0 21.12565,22.01074 22.08097,18.73536 4.68384,-16.05888 32.78688,-25.42656 32.78688,-25.42656 l 32.78689,-24.75745 6.6912,-47.50753 16.728,-58.21345 17.39712,-60.88992 -31.44864,145.19906 2.00736,60.22081 12.71328,-0.66912 3.3456,-32.11777 22.75008,-37.47072 14.05153,-36.80161 42.15456,-36.80161 40.14721,-35.67281 -3.3456,47.04786 c 0,0 6.6912,35.46336 -4.01472,39.47808 -3.96244,1.48591 -9.12446,42.27142 -11.37504,52.19137 -0.81843,3.60739 1.33824,38.80897 1.33824,38.80897 l 31.44864,7.36032 c 0,0 24.08833,-11.37504 30.77953,-12.71328 6.6912,-1.33825 44.16192,-27.43393 44.16192,-27.43393 l 8.02945,-46.16929 24.75744,-128.47106 c 0,0 -16.728,57.54433 -17.39712,62.89729 -0.66912,5.35296 -12.71328,167.94915 -12.71328,167.94915 l 22.08096,-50.18401 17.39712,-57.54433 24.75744,-38.80896 35.46337,-23.41921 41.48545,-22.75008 c 0,0 -6.02208,42.82369 -7.36032,48.84577 -1.33824,6.02208 -7.36033,45.50016 -8.02945,53.52961 -0.66912,8.02944 -8.02944,49.48181 -8.02944,53.49653 0,4.01472 44.83105,24.1214 44.83105,24.1214 l 44.83105,-23.41921 c 0,0 8.69856,-22.75008 12.71328,-30.1104 4.01472,-7.36032 -2.00736,-79.62529 -2.00736,-79.62529 l 68.91941,-241.552356 -26.09573,280.361316 -11.37504,79.62529 38.13987,2.00737 47.5075,-55.53697 109.7357,27.43393 13.3824,2.00735 -53.5296,30.11041 c 110.1036,15.71536 82.9843,-23.45845 113.7504,-39.47809 l 16.728,-78.95617 44.8311,-56.20609 60.2208,23.4192 -18.0663,58.88257 3.3456,-72.26497 -68.9193,1.33824 c 0,0 -28.7722,53.52961 -28.7722,59.55169 0,6.02208 -0.6691,65.57377 0,71.59585 0.6691,6.02208 41.4854,25.26122 41.4854,25.26122 0,0 38.809,6.6912 50.184,4.01472 11.3751,-2.67648 42.1546,-11.87882 42.1546,-11.87882 l 18.0663,-27.43392 19.4044,-56.20609 12.7133,-48.17665 58.2135,-23.4192 70.2576,59.48554 -46.1693,-58.81642 c 0,0 -64.9046,-7.36032 -70.2576,3.3456 -5.353,10.70592 -25.4266,76.27969 -25.4266,85.64737 0,9.36768 12.0442,71.59585 13.3824,75.61058 1.3383,4.01472 51.5222,3.1582 51.5222,3.1582 l 32.787,-11.18765 22.0809,-38.80896 6.0221,-24.75745 -35.4634,-62.89729 42.1546,46.16929 47.5075,10.0368 15.3898,-9.36768 c 0,0 26.7648,-40.1472 34.7942,-45.50017 8.0295,-5.35296 53.5297,-32.11776 57.5444,-33.456 4.0147,-1.33824 69.5885,39.47808 69.5885,39.47808 L 1662.7635,249.5818 c 0,0 -36.8016,25.42656 -39.4781,30.1104 -2.6765,4.68385 0.6691,60.90095 -0.6691,69.59952 -1.3383,8.69856 24.7574,65.56275 24.7574,65.56275 0,0 46.1693,5.35296 50.8531,6.02208 4.6839,0.66912 28.1031,-20.74273 28.1031,-20.74273 0,0 18.0662,-40.1472 20.0736,-45.50016 2.0073,-5.35296 4.6838,-57.54433 4.6838,-57.54433 l -48.1766,-42.15457 c 0,0 15.3897,52.19137 25.4265,56.20609 10.0368,4.01472 45.5002,15.38976 58.2135,16.05888 12.7133,0.66912 58.8826,-6.6912 58.8826,-6.6912 l 36.8016,-12.04416 30.7795,-40.81633 14.7206,-47.50752 22.7501,-62.89729 15.3898,-49.51489 -4.0147,-82.599408 -34.7943,-2.378848 -40.8163,35.463365 -20.7427,72.264971 -17.3972,78.28705 -14.7206,78.28706 2.0074,53.5296 34.7942,68.91938 36.1325,11.37504 49.5149,-18.73537 23.4192,-32.78688 12.0442,-42.15456"
              ></path>
            </mask>
          </g>
        </defs>
        <path
          d="m 271.7372,332.83517 q 6.03377,0 9.5612,5.56964 3.43461,5.56963 3.43461,15.31648 v 0 q 0,18.56544 -8.81859,28.77643 v 0 q -19.02957,23.2068 -41.77224,39.63722 -22.74266,16.52324 -45.02119,16.52324 v 0 q -35.27433,0 -53.83977,-41.3081 v 0 q -19.49371,24.5992 -34.06758,32.95365 -14.666702,8.35445 -34.160412,8.35445 v 0 q -28.3123,0 -46.59925,-21.07177 Q 2.0741876,396.4218 2.0741876,362.53988 v 0 q 0,-37.13088 15.7806204,-68.97061 15.78063,-31.7469 43.44313,-51.98323 27.56968,-20.14351 61.915742,-23.85659 v 0 q 8.81858,-90.04239 33.69627,-153.907497 24.78487,-63.77228522 65.1647,-63.77228522 v 0 q 19.95785,0 33.23214,18.10130422 13.18146,18.101303 13.18146,54.768047 v 0 q 0,51.983231 -25.52748,121.603631 -25.52748,69.6204 -68.22799,142.95388 v 0 q 1.85654,26.91989 8.16879,38.52329 6.21942,11.6034 15.96628,11.6034 v 0 q 12.53167,0 25.52748,-11.13926 12.99581,-11.13927 34.8102,-37.13088 v 0 q 5.56963,-6.49791 12.53167,-6.49791 z M 216.96915,45.534995 q -8.81858,0 -17.63717,31.282766 -8.81858,31.375589 -15.038,81.966409 -6.31225,50.59083 -9.09707,105.82301 v 0 Q 227.18014,151.358 227.18014,82.665875 v 0 q 0,-17.637168 -2.97047,-27.384024 -3.06329,-9.746856 -7.24052,-9.746856 z M 83.297988,391.78044 q 8.81858,0 17.637172,-7.24052 8.81858,-7.14769 22.27852,-26.6414 v 0 q -4.64136,-25.06335 -4.64136,-56.16046 v 0 q 0,-11.13926 0.92827,-36.20261 v 0 q -25.527472,7.89032 -42.422022,34.06759 -16.98738,26.27009 -16.98738,58.29548 v 0 q 0,33.88192 23.2068,33.88192 z m 216.287372,46.87774 q -28.77643,0 -45.94946,-20.88612 -17.17304,-20.88612 -17.17304,-54.76805 v 0 q 0,-37.13088 17.17304,-70.36301 17.17303,-33.13931 45.67098,-53.37564 28.59078,-20.14351 60.61616,-20.14351 v 0 q 10.21099,0 13.6456,3.89875 3.52743,3.99157 5.84811,14.20256 v 0 q 9.74686,-1.85655 20.42199,-1.85655 v 0 q 22.74266,0 22.74266,16.24476 v 0 q 0,9.74686 -6.96204,46.4136 v 0 q -10.67513,53.37564 -10.67513,74.26176 v 0 q 0,6.96204 3.43461,11.13927 3.52743,4.17722 9.09707,4.17722 v 0 q 8.81858,0 21.35025,-11.41774 12.53167,-11.32492 33.88193,-36.8524 v 0 q 5.56963,-6.49791 12.53167,-6.49791 v 0 q 6.03377,0 9.46837,5.56964 3.52744,5.56963 3.52744,15.31648 v 0 q 0,18.56544 -8.81859,28.77643 v 0 q -19.02957,23.67094 -40.37983,39.9157 -21.35025,16.24476 -41.3081,16.24476 v 0 q -15.31649,0 -28.12664,-10.48947 -12.71733,-10.39665 -19.21523,-28.49795 v 0 q -24.13507,38.98742 -60.80182,38.98742 z m 16.7089,-46.87774 q 10.21099,0 19.49371,-12.06753 9.28272,-12.06754 13.45994,-32.02539 v 0 l 17.17304,-85.40102 q -19.49372,0.46414 -36.01696,14.57387 -16.43041,14.20256 -26.17727,37.40936 -9.74686,23.2068 -9.74686,49.19842 v 0 q 0,14.38821 5.75529,21.35025 5.84811,6.96204 16.05911,6.96204 z m 177.29995,46.87774 q -17.63717,0 -24.87769,-18.56544 -7.1477,-18.56544 -7.1477,-59.40941 v 0 q 0,-60.33768 17.17304,-114.64159 v 0 q 4.17722,-13.45994 13.64559,-19.77219 9.56121,-6.21942 26.73424,-6.21942 v 0 q 9.28272,0 12.99581,2.32068 3.71308,2.32068 3.71308,8.81858 v 0 q 0,7.42618 -6.96204,33.41779 v 0 q -4.64136,18.56544 -7.42617,32.48952 -2.78482,13.92408 -4.64136,34.34607 v 0 q 15.31649,-39.9157 34.34606,-64.97904 19.02958,-25.06335 37.31654,-35.73848 18.37978,-10.67512 33.69627,-10.67512 v 0 q 30.16884,0 30.16884,30.16884 v 0 q 0,18.1013 -10.21099,65.44317 v 0 q -8.81859,40.37983 -8.81859,53.37564 v 0 q 0,18.56544 13.45995,18.56544 v 0 q 9.28272,0 22.00004,-11.41774 12.81016,-11.32492 34.16041,-36.8524 v 0 q 5.47681,-6.49791 12.43885,-6.49791 v 0 q 6.12659,0 9.5612,5.56964 3.52743,5.56963 3.52743,15.31648 v 0 q 0,18.56544 -8.81858,28.77643 v 0 q -19.95785,24.59921 -42.979,40.37984 -22.92831,15.78062 -52.16888,15.78062 v 0 q -23.67094,0 -35.73847,-13.73843 -12.06754,-13.64559 -12.06754,-39.63721 v 0 q 0,-12.99581 6.40508,-46.4136 v 0 q 6.12659,-29.24057 6.12659,-40.37983 v 0 q 0,-7.42618 -5.10549,-7.42618 v 0 q -6.03377,0 -16.98738,15.50215 -10.86078,15.59497 -22.27853,41.12244 -11.32492,25.52748 -18.28696,53.83978 v 0 q -5.10549,21.81439 -11.88188,29.42622 -6.68356,7.70466 -21.07177,7.70466 z m 230.11862,0 q -17.63716,0 -24.78486,-18.56544 -7.24052,-18.56544 -7.24052,-59.40941 v 0 q 0,-60.33768 17.17303,-114.64159 v 0 q 4.17723,-13.45994 13.73843,-19.77219 9.46837,-6.21942 26.6414,-6.21942 v 0 q 9.28272,0 12.99581,2.32068 3.71309,2.32068 3.71309,8.81858 v 0 q 0,7.42618 -6.96204,33.41779 v 0 q -4.64136,18.56544 -7.42618,32.48952 -2.78481,13.92408 -4.64136,34.34607 v 0 q 15.31649,-39.9157 34.34607,-64.97904 19.02957,-25.06335 37.40936,-35.73848 18.28696,-10.67512 33.60345,-10.67512 v 0 q 30.16884,0 30.16884,30.16884 v 0 q 0,18.1013 -10.211,65.44317 v 0 q -8.81858,40.37983 -8.81858,53.37564 v 0 q 0,18.56544 13.45994,18.56544 v 0 q 9.28272,0 22.09288,-11.41774 12.71732,-11.32492 34.06758,-36.8524 v 0 q 5.56963,-6.49791 12.53167,-6.49791 v 0 q 6.03377,0 9.5612,5.56964 3.43461,5.56963 3.43461,15.31648 v 0 q 0,18.56544 -8.81859,28.77643 v 0 q -19.95784,24.59921 -42.88616,40.37984 -23.02115,15.78062 -52.26171,15.78062 v 0 q -23.67094,0 -35.73848,-13.73843 -12.06753,-13.64559 -12.06753,-39.63721 v 0 q 0,-12.99581 6.4979,-46.4136 v 0 q 6.03377,-29.24057 6.03377,-40.37983 v 0 q 0,-7.42618 -5.1055,-7.42618 v 0 q -6.03376,0 -16.89455,15.50215 -10.95361,15.59497 -22.27852,41.12244 -11.41775,25.52748 -18.37979,53.83978 v 0 q -5.1055,21.81439 -11.78905,29.42622 -6.77639,7.70466 -21.16461,7.70466 z M 981.77245,189.41715 q -19.49371,0 -29.24057,-9.09706 -9.74686,-9.00424 -9.74686,-25.249 v 0 q 0,-16.24476 12.81016,-27.19837 12.71732,-10.86078 31.7469,-10.86078 v 0 q 17.17302,0 27.84812,8.35444 10.6751,8.35445 10.6751,23.67094 v 0 q 0,18.56544 -12.0675,29.42622 -12.0675,10.95361 -32.02535,10.95361 z m -3.71309,249.24103 q -30.16884,0 -43.81444,-21.35026 -13.73842,-21.35025 -13.73842,-56.62459 v 0 q 0,-20.88612 5.38397,-53.65412 5.29115,-32.67517 13.6456,-60.98747 v 0 q 4.17723,-14.85235 11.13927,-20.42198 6.96204,-5.56963 22.27852,-5.56963 v 0 q 23.67094,0 23.67094,15.78062 v 0 q 0,11.6034 -8.81858,53.83978 v 0 q -11.13927,51.05496 -11.13927,69.15626 v 0 q 0,13.92408 3.71309,21.35025 3.71309,7.42618 12.53167,7.42618 v 0 q 8.35439,0 20.88609,-11.6034 12.5317,-11.6034 33.4178,-36.66674 v 0 q 5.5696,-6.49791 12.5317,-6.49791 v 0 q 6.0337,0 9.5612,5.56964 3.4346,5.56963 3.4346,15.31648 v 0 q 0,18.56544 -8.8186,28.77643 v 0 q -45.9495,56.16046 -85.86514,56.16046 z m 154.09314,0 q -20.422,0 -30.9115,-11.13926 -10.3966,-11.13927 -10.3966,-29.24057 v 0 q 0,-20.88612 11.789,-33.41779 11.8819,-12.53168 33.2322,-12.53168 v 0 q 20.4219,0 30.8186,9.93252 10.4895,10.02533 10.4895,29.51904 v 0 q 0,21.35026 -12.0676,34.06759 -12.0675,12.81015 -32.9536,12.81015 z m 175.9075,0 q -45.4854,0 -70.8272,-25.80596 -25.249,-25.71314 -25.249,-67.94951 v 0 q 0,-37.59502 14.8524,-65.90731 14.8523,-28.3123 38.5233,-43.62879 23.6709,-15.31648 49.6625,-15.31648 v 0 q 25.5275,0 39.6372,15.038 14.2026,15.13084 14.2026,38.80177 v 0 q 0,19.49371 -8.633,32.95366 -8.5401,13.45994 -22.4641,13.45994 v 0 q -8.8186,0 -14.2026,-4.17722 -5.2911,-4.17723 -5.2911,-11.6034 v 0 q 0,-3.24895 0.9282,-7.42618 0.9283,-4.17722 1.3924,-6.03377 v 0 q 2.3207,-6.96204 2.3207,-12.9958 v 0 q 0,-6.03377 -3.0633,-9.28272 -2.9705,-3.24896 -8.5401,-3.24896 v 0 q -10.6751,0 -19.9578,9.46838 -9.2828,9.5612 -14.8524,25.80596 -5.5696,16.24476 -5.5696,35.73847 v 0 q 0,53.83978 46.8777,53.83978 v 0 q 19.0296,0 41.0296,-12.81016 22.0929,-12.71732 43.4432,-38.2448 v 0 q 5.5696,-6.49791 12.5316,-6.49791 v 0 q 6.0338,0 9.4684,5.56964 3.5274,5.56963 3.5274,15.31648 v 0 q 0,17.63717 -8.8185,28.77643 v 0 q -21.8144,26.91989 -52.2617,41.49376 -30.3545,14.6667 -58.6668,14.6667 z m 318.7686,-144.81043 q 6.0337,0 9.2827,6.03377 3.2489,6.03377 3.2489,15.31649 v 0 q 0,22.27852 -13.4599,26.45575 v 0 q -27.8482,9.74685 -61.266,11.13926 v 0 q -8.8185,38.98742 -34.8102,62.47271 -25.9916,23.39245 -58.9452,23.39245 v 0 q -27.8482,0 -47.5276,-13.45994 -19.7721,-13.45995 -29.9831,-35.73848 -10.211,-22.27852 -10.211,-48.27014 v 0 q 0,-35.27433 13.4599,-62.93684 13.46,-27.56968 37.1309,-43.16465 23.6709,-15.50214 52.4474,-15.50214 v 0 q 35.2743,0 56.903,24.32073 21.5359,24.41355 25.249,60.15202 v 0 q 21.8144,-1.39241 51.9833,-9.28272 v 0 q 3.713,-0.92827 6.4979,-0.92827 z m -152.2366,95.61201 q 14.8523,0 25.8059,-12.06753 10.8608,-12.06754 14.5739,-34.8102 v 0 q -14.3882,-9.74686 -22.0001,-25.52748 -7.7046,-15.78062 -7.7046,-33.41779 v 0 q 0,-7.42618 1.3924,-14.85235 v 0 h -2.3207 q -18.5654,0 -30.8186,17.82282 -12.346,17.91565 -12.346,50.40517 v 0 q 0,25.52748 10.0253,38.98742 9.9325,13.45994 23.3925,13.45994 z m 361.5619,-95.61201 q 6.0338,0 9.2827,6.03377 3.249,6.03377 3.249,15.31649 v 0 q 0,22.27852 -13.46,26.45575 v 0 q -27.8481,9.74685 -61.2659,11.13926 v 0 q -8.8186,38.98742 -34.8102,62.47271 -25.9916,23.39245 -58.9453,23.39245 v 0 q -27.8482,0 -47.5275,-13.45994 -19.7722,-13.45995 -29.9832,-35.73848 -10.211,-22.27852 -10.211,-48.27014 v 0 q 0,-35.27433 13.4599,-62.93684 13.46,-27.56968 37.1309,-43.16465 23.671,-15.50214 52.4474,-15.50214 v 0 q 35.2743,0 56.9031,24.32073 21.5359,24.41355 25.249,60.15202 v 0 q 21.8144,-1.39241 51.9832,-9.28272 v 0 q 3.7131,-0.92827 6.4979,-0.92827 z m -152.2366,95.61201 q 14.8523,0 25.806,-12.06753 10.8607,-12.06754 14.5738,-34.8102 v 0 q -14.3882,-9.74686 -22,-25.52748 -7.7047,-15.78062 -7.7047,-33.41779 v 0 q 0,-7.42618 1.3924,-14.85235 v 0 h -2.3207 q -18.5654,0 -30.8186,17.82282 -12.346,17.91565 -12.346,50.40517 v 0 q 0,25.52748 10.0253,38.98742 9.9325,13.45994 23.3925,13.45994 z m 300.7601,-56.62459 q 6.0338,0 9.4684,5.56964 3.5274,5.56963 3.5274,15.31648 v 0 q 0,18.56544 -8.8186,28.77643 v 0 q -19.9578,24.59921 -43.4431,40.37984 -23.3924,15.78062 -53.0971,15.78062 v 0 q -40.844,0 -60.6162,-37.13088 -19.6794,-37.13088 -19.6794,-96.07615 v 0 q 0,-56.62459 14.5739,-129.02981 14.6667,-72.40521 43.1646,-124.388441 28.5908,-51.98323122 68.0424,-51.98323122 v 0 q 22.2785,0 34.9958,20.60763822 12.8102,20.700465 12.8102,59.223753 v 0 q 0,55.232181 -30.633,128.101531 -30.633,72.86935 -83.0803,144.34629 v 0 q 3.2489,19.02958 10.6751,27.10555 7.4262,8.16879 19.4937,8.16879 v 0 q 19.0296,0 33.4178,-10.95361 14.3882,-10.86078 36.6667,-37.31653 v 0 q 5.5697,-6.49791 12.5317,-6.49791 z M 1927.5887,45.999131 q -10.6751,0 -24.1351,38.523288 -13.4599,38.523281 -23.6709,95.612011 -10.211,57.08873 -11.1393,109.5361 v 0 q 32.9537,-54.30392 52.4474,-108.88631 19.4937,-54.48956 19.4937,-99.510753 v 0 q 0,-35.274336 -12.9958,-35.274336 z"
          opacity="1"
          fill="#fff"
          mask="url(#mask-marketing-M)"
          id="logo-svg"
          stroke-width="9.28272"
        ></path>
      </svg>
    </a>

    <button
      id="navbar-toggler-btn"
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
            
        <li class="nav-item">
          <a
            class="nav-link"
            href="/"
            target="_self"
          >
            <i class="iconfont icon-home-fill"></i>
            <span>首页</span>
          </a>
        </li>
             
        <li class="nav-item">
          <a
            class="nav-link"
            href="/archives/"
            target="_self"
          >
            <i class="iconfont icon-archive-fill"></i>
            <span>归档</span>
          </a>
        </li>
             
        <li class="nav-item">
          <a
            class="nav-link"
            href="/categories/"
            target="_self"
          >
            <i class="iconfont icon-category-fill"></i>
            <span>分类</span>
          </a>
        </li>
             
        <li class="nav-item">
          <a
            class="nav-link"
            href="/tags/"
            target="_self"
          >
            <i class="iconfont icon-tags-fill"></i>
            <span>标签</span>
          </a>
        </li>
             
        <li class="nav-item">
          <a
            class="nav-link"
            href="/about/"
            target="_self"
          >
            <i class="iconfont icon-user-fill"></i>
            <span>关于</span>
          </a>
        </li>
          
        <li class="nav-item" id="search-btn">
          <a
            class="nav-link"
            target="_self"
            href="javascript:;"
            data-toggle="modal"
            data-target="#modalSearch"
            aria-label="Search"
          >
            <i class="iconfont icon-search"></i>
          </a>
        </li>
          
        <li class="nav-item" id="color-toggle-btn">
          <a
            class="nav-link"
            target="_self"
            href="javascript:;"
            aria-label="Color Toggle"
          >
            <i class="iconfont icon-dark" id="color-toggle-icon"></i>
          </a>
        </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/da30d0efd7373b2f8b5e0e19d4a1981c.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle">G2实现大数据展示模块</span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2019-09-06 00:00" pubdate>
          2019年9月6日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          3.3k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          28 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">G2实现大数据展示模块</h1>
            
              <p id="updated-time" class="note note-info" style="">
                
                  
                    本文最后更新于 2024年5月6日 凌晨
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>本次回顾了业务需求里大数据模块的实现过程。该项目发布以后之前有投屏在公司大屏上，某天偶然经过以后看了很自豪啊哈哈。回顾心路历程，从接到需求后恶补正态分布函数，到技术选型中途从D3转向G2，再到G2图表实现到80%以后，发现其动效方面API能力不足之后硬核做完以后可谓一波三折，该需求一共做了6天，今天刚好回顾一下，正好也可以和之前开发使用过的eChart、D3做一个简单的对比。</p>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/bc2b40e50b4f83e0c1f47520034c507e.jpeg" srcset="/img/loading.gif" lazyload alt="1567610715274-0d2e6f41-d7c3-4b21-a165-4b4d525423a1.jpeg"></p>
<h1 id="一、需求分析"><a href="#一、需求分析" class="headerlink" title="一、需求分析"></a>一、需求分析</h1><p>需求很简单，大数据模块需要前端画两个图，一个是面积曲线图、一个是环形进度条。</p>
<h2 id="面积曲线图"><a href="#面积曲线图" class="headerlink" title="面积曲线图"></a>面积曲线图</h2><ul>
<li>面积曲线图需要使用曲线绘制出固定的走势</li>
<li>线条和面积的阴影颜色不同</li>
<li>初次渲染时需要有自左向右的进入动画</li>
<li>相应数值处标注起求职者的薪水位置</li>
</ul>
<h2 id="环形进度条"><a href="#环形进度条" class="headerlink" title="环形进度条"></a>环形进度条</h2><ul>
<li>数据大小使用环形进度条百分比呈现</li>
<li>初次进入时有个数据增长的动效。</li>
<li>环形进度条有个白色圆跟着动</li>
</ul>
<p>emmmm….需求看起来好像不过分</p>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/69a80c41d02875c5c4cc747fb59af25f.gif" srcset="/img/loading.gif" lazyload alt="Untitled.gif"></p>
<h1 id="二、画图届的PK"><a href="#二、画图届的PK" class="headerlink" title="二、画图届的PK"></a>二、画图届的PK</h1><p>听到数据可视化需求，马上脑袋里出现三大框架，<del>vue，react、angular</del>，是 echart、G2、D3。</p>
<h2 id="多而全的EChart"><a href="#多而全的EChart" class="headerlink" title="多而全的EChart"></a>多而全的EChart</h2><p>以前用echart做过移动端的饼图和折线图，而echart作为一款开箱即用的图表库，确实很方便，但是echart的定制能力比较弱，对于这么简单的图估计光查api和删减配置项就要弄很久，而且最后是否能还原到设计稿这样样式应该是个问号？不过之所以用惯了echart的一步到位，也想探究下画图更加偏底层的内容。</p>
<h2 id="陡峭的D3"><a href="#陡峭的D3" class="headerlink" title="陡峭的D3"></a>陡峭的D3</h2><p>G2是画图届的面团，可定制化能力比echart相对高，用它来实现应该没问题。好，那我还是用D3吧，这样我就可以给大家写一篇D3的分享了，不过大家也发现了，最终文章的标题是讲 G2而不是D3，因为在D3上碰壁了。</p>
<p>我们简单说一下D3和G2的区别，D3简称“画图届的jquery”，因为D3是基于SVG的，而G2则是基于Canvas（当然3.2.7版本也开始支持以SVG渲染），两者其实各有优缺点，「数据可视化小组」最近搬运的这篇文章</p>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/docs/share/eda67c40-b202-48d3-97b7-fb7a59a2cc26">《选择Canvas还是SVG》</a>简单介绍了Canvas 和 SVG的适用场景和性能差异。</p>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/5ceb9b790534c2c3fc05d2384a90d915.png" srcset="/img/loading.gif" lazyload alt="1567615980097-741ce71b-ec50-47fe-9608-5e78bf2e2c72.png"></p>
<p><strong>简单摘录一下：</strong></p>
<p>如果单就图表库的视角来看，选择 Canvas 和 SVG 各有千秋。小画布、大数据量的场景适合用 Canvas，譬如热力图、大数据量的散点图等。如果画布非常大，有缩放、平移等高频的交互，或者移动端对内存占用量非常敏感等场景，可以使用 SVG 的方案。</p>
<h3 id="为什么初期使用D3不是一个好的选择？"><a href="#为什么初期使用D3不是一个好的选择？" class="headerlink" title="为什么初期使用D3不是一个好的选择？"></a>为什么初期使用D3不是一个好的选择？</h3><p>好了，接下来我们说一说为什么刚上来就使用D3不是一个好的选择？</p>
<p>首先你得储备大量SVG相关的知识，但如果你之前没接触过SVG绘图的话，就会花大量的时间成本下去，</p>
<p>D3主要是和DOM交互，比如SVG有六大预设图形：矩形rect、圆形circle、椭圆ellipse、线条line、折线polyline、多边形polygon，另外再加一个万能的路径path</p>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/5eaa7db45657c134c696ba6d3d98aab6.png" srcset="/img/loading.gif" lazyload alt="1567698476394-79dbdf0e-a87d-43e5-865c-740fe8d40518.png"></p>
<p>当你决定使用D3画图时，你就会不能避免的接触这些标签的绘图属性，特别是当你要使用这么一堆属性来绘图的时候，你还得去学每个图形的属性，那真的是会增加很多时间成本。当然，D3已经帮你做了很多封装，即使这样我还是觉得要了解太多SVG的知识，才能把一个图画好。比如我们看一个简单的示例</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000012303584">《D3简单入门》</a></li>
<li><a target="_blank" rel="noopener" href="https://www.w3schools.com/graphics/svg_path.asp">《w3cSchool - svg path》</a></li>
</ul>
<p>这个其实就有点类似于用CSS3动画去实现复杂的H5动画，这一点其实我还是建议使用可视化的方式去调整，之前项目里我做过一个带路径的体验地图（红框部分），其路径就是直接通过设计稿sketch生成的，路劲的行径动效则是根据数值的百分比的位置计算出来的，光这个动效从预研到实现用了2天。</p>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/d33cbdad757b1a51ed0c6765c6afacbf.png" srcset="/img/loading.gif" lazyload alt="1567738830152-8a0fd8be-f933-462d-9859-2012cae4c04a.png"></p>
<p>其次，还需要掌握一些算法和数学函数，比如这次画这个像抛物线（后面会讲），画圆弧，这些SVG固然有很多预设可以选，但是你要让他们动起来，就必须使用 path，而path几乎是一个点一个点绘制的，这才造就了SVG的无限可能。</p>
<p><strong>这是我中途放弃D3的原因。</strong></p>
<p>当然，使用D3比纯用JS去操作SVG还是有其优势的，这个后面再单独开一章节讲。</p>
<h1 id="三、用G2把图画好"><a href="#三、用G2把图画好" class="headerlink" title="三、用G2把图画好"></a>三、用G2把图画好</h1><h2 id="面积图"><a href="#面积图" class="headerlink" title="面积图"></a>面积图</h2><p>你使用G2的话，其实有一种找回echart的感觉, 通过官网去找示例，<a target="_blank" rel="noopener" href="https://antv.alipay.com/zh-cn/g2/3.x/demo/area/basic.html">面积图</a> 比较符合我们的诉求，通过简单的chart.line() 就能绘制出平滑的曲线。</p>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/0b154b66ca3f9bbbe813876de5c7ed04.png" srcset="/img/loading.gif" lazyload alt="1567747687152-fd8043b4-0e81-4e57-9a94-d22307064f5f.png"></p>
<p>这个图的难点在于以下三个方面：</p>
<ul>
<li>曲线部分，因为要画出类似设计稿的平滑曲线，所以就不能只使用几个点的标记，我们需要一连串的坐标，这次得益于算法组的帮助，告诉我这是一条正态分布曲线图。</li>
<li>数据部分，因为事先定义好了使用正态分布曲线，那么具体标注的地方就是相应的坐标，后端传入数据的区间为 -2.5 ~ 2.5，需要将坐标映射到 0 ~100 的图中。</li>
</ul>
<h3 id="正态分布函数"><a href="#正态分布函数" class="headerlink" title="正态分布函数"></a>正态分布函数</h3><p>我们先来回顾看下一般正态分布函数的定义，搜了全网，恶补了高数的知识，它的定义是这样的：</p>
<blockquote>
<p>若<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%9A%8F%E6%9C%BA%E5%8F%98%E9%87%8F/828980">随机变量</a>X服从一个<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%95%B0%E5%AD%A6%E6%9C%9F%E6%9C%9B/5362790">数学期望</a>为μ、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%96%B9%E5%B7%AE/3108412">方差</a>（σ^2）的正态分布，记为N(μ，σ^2)。其<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%A6%82%E7%8E%87%E5%AF%86%E5%BA%A6%E5%87%BD%E6%95%B0/5021996">概率密度函数</a>为正态分布的<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%9C%9F%E6%9C%9B%E5%80%BC/8664642">期望值</a>μ决定了其位置，其<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%A0%87%E5%87%86%E5%B7%AE/1415772">标准差</a>σ决定了分布的幅度。当μ &#x3D; 0,σ &#x3D; 1时的正态分布是<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%A0%87%E5%87%86%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83">标准正态分布</a>。</p>
</blockquote>
<p>它的函数大概长这样</p>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/1682c3895374d065c038a4cb23ec30e4.png" srcset="/img/loading.gif" lazyload alt="1567749607066-84314abe-dd4e-4999-ae52-8138a75ebe2d.png"></p>
<p>画到图形上</p>
<p><strong>一般正态分布函数</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/aab56c82bd2177262817055b34e2ab33.png" srcset="/img/loading.gif" lazyload alt="Untitled.png"></p>
<p><strong>μ &#x3D; 0,σ &#x3D; 1，为标准正态分布</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/1643c8b622dd00aee4f87baec1d8b87a.png" srcset="/img/loading.gif" lazyload alt="Untitled.png"></p>
<p>这里我们要关注几个参数：</p>
<ol>
<li>1μ（平均值）决定了最高点的位置x轴上的偏移量。</li>
<li>2σ（标准差）决定了这个函数的陡峭还是平缓, σ越小，函数越陡峭</li>
<li>μ - n*σ 可以划定函数的边界</li>
</ol>
<p><strong>正态分布函数使用JS表达：</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"> <span class="hljs-comment">// x: x的值</span><br> <span class="hljs-comment">// mean: 平均数</span><br> <span class="hljs-comment">// std: 标准差</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">lineGenerate</span>(<span class="hljs-params">x, mean, std</span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      (<span class="hljs-number">1</span> / (std * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>))) * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">exp</span>(-(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(x - mean, <span class="hljs-number">2</span>) / (<span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(std, <span class="hljs-number">2</span>))))<br>    )<br>&#125;<br></code></pre></td></tr></table></figure>


<p><strong>数据映射</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/9b82b55711d867cc1bd4dfcd991365fa.png" srcset="/img/loading.gif" lazyload alt="1567748640065-fc0616af-306f-4808-887f-e3d8faa8bcd3.png"></p>
<p>通过将 -2.5 ~ 2.5 的接口数据，映射到 0~100 我们通过方程计算得知</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// x 为输入值 </span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">scaleMap</span>(<span class="hljs-params">x</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>((<span class="hljs-number">20</span> * x) + <span class="hljs-number">50</span>)<br>  &#125;<br></code></pre></td></tr></table></figure>


<p><strong>图例动态高度</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/07e3f0e90161bb66d9623e72d92c0136.png" srcset="/img/loading.gif" lazyload alt="1567751903041-fff1eb54-a6df-4bd3-9243-6c14fedc208c.png"></p>
<p>图例部分是使用dom实现的，这部分由G2的 chart.guide() API 提供，它的宽高都是像素px，这边我们没定义相应的数据到尺寸的比例尺，因为基本没用上，所以这部分稍微偷了下懒，毕竟在pc端也没有响应式缩放，所以就给对应的坐标乘以了一个系数去实现类似的根据不同的数据展示不同的高度。</p>
<p>html片段：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript">**<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;region&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width:23.8px;height:$&#123;lineGenerate(drawX) * adjustValue&#125;px;&quot;</span>&gt;</span>**</span><br></code></pre></td></tr></table></figure>


<p>javascript片段：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript">**<span class="hljs-comment">//计算和中心点的偏移量 ，距离中心点约远，系数越小</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(drawX - <span class="hljs-number">50</span>) &lt; <span class="hljs-number">10</span>) &#123;<br>      adjustValue = <span class="hljs-number">16200</span><br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(drawX - <span class="hljs-number">50</span>) &lt; <span class="hljs-number">20</span>) &#123;<br>      adjustValue = <span class="hljs-number">16000</span><br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(drawX - <span class="hljs-number">50</span>) &lt; <span class="hljs-number">30</span>) &#123;<br>      adjustValue = <span class="hljs-number">15000</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      adjustValue = <span class="hljs-number">14500</span><br>    &#125;**<br></code></pre></td></tr></table></figure>


<p>完整示例：<a target="_blank" rel="noopener" href="https://codepen.io/danielchan27/pen/YzKYENw?editors=1011">codePen - areaChart</a></p>
<h3 id="环形进度条-1"><a href="#环形进度条-1" class="headerlink" title="环形进度条"></a>环形进度条</h3><p>而绘制环形进度条我参考了<a target="_blank" rel="noopener" href="https://www.yuque.com/chentianyu/ykdmaz/tt8afr/edit">G2-仪表盘</a>结果半天没写出来，主要是 这个仪表盘使用了取巧的办法，其实质上还是使用了chart去做，对坐标轴采用了极坐标的变换，所以看上去像环形进度条，最难实现的就是首末两段的圆角部分，切差距比较大，遂弃。</p>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/07af33a0ef37e482bfd6a5bc412f30b4.png" srcset="/img/loading.gif" lazyload alt="1567754481251-27cb8214-8470-4b6e-87a7-7881ea3318a0.png"></p>
<h3 id="注册自定义图形"><a href="#注册自定义图形" class="headerlink" title="注册自定义图形"></a>注册自定义图形</h3><p>但是G2除了能绘制图表以为，还通过了Shape.shape实现了<a target="_blank" rel="noopener" href="https://www.yuque.com/antv/g2-docs/api-shape">自定义图形</a>的绘制，具体有以下几种</p>
<ul>
<li><strong>point：</strong>点的绘制很简单，只要获取它的坐标以及大小即可，其中的 size 属性代表的是点的半径。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/aa081a50c441a0e8e054e96577defe40.png" srcset="/img/loading.gif" lazyload alt="Untitled.png"></p>
<ul>
<li><strong>line：</strong>线其实是由无数个点组成，在 G2 中我们将参与绘制的各个数据转换成坐标上的点然后通过线将逐个点连接而成形成线图，其中的 size 属性代表的是线的粗细。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/a1f4c92c27d1f371cd181d106c52ac30.png" srcset="/img/loading.gif" lazyload alt="Untitled.png"></p>
<ul>
<li><strong>area：</strong>area 面其实是在 line 线的基础之上形成的, 它将折线图中折线与自变量坐标轴之间的区域使用颜色或者纹理填充。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/405fe7f32022b39b8e880529ec88150c.png" srcset="/img/loading.gif" lazyload alt="Untitled.png"></p>
<ul>
<li><strong>interval：</strong>interval 默认的图形形状是矩形，而矩形实际是由四个点组成的，在 G2 中我们根据 pointInfo 中的 x、y、size 以及 y0 这四个值来计算出这四个点，然后顺时针连接而成。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/278787656dd26accc462362be0420743.png" srcset="/img/loading.gif" lazyload alt="Untitled.png"></p>
<ul>
<li><strong>polygon：</strong>polygon 多边形其实也是由多个点连接而成，在 pointInfo 中 x 和 y 都是数组结构。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/713883cf91082ff07ec92319eb997dfc.png" srcset="/img/loading.gif" lazyload alt="Untitled.png"></p>
<ul>
<li><strong>schema：</strong>schema 作为一种自定义的几何图形，在 G2 中默认提供了 box 和 candle 两种 shape，分别用于绘制箱型图和股票图，注意这两种形状的矩形部分四个点的连接顺序都是顺时针，并且起始点均为左下角，这样就可以无缝转换至极坐标。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/danni-cool/my-blog@cdn/image/d163a1c014adf0df93415af5f116708c.png" srcset="/img/loading.gif" lazyload alt="Untitled.png"></p>
<ul>
<li><strong>edge：</strong>edge 边同 line 线一致，区别就是 edge 是一个线段，连接边的两个端点即可。</li>
</ul>
<p>于是查了找遍全网，找了半天文档，终于发现了原来 G2.Shape.registerShape 是可以实现的，但是文档和相关demo少的可怜，接下来的画图真的是硬核写完的。</p>
<ol>
<li><strong>定义带有圆角的5px的线的预设</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Shape</span> = <span class="hljs-variable constant_">G2</span>.<span class="hljs-property">Shape</span> <span class="hljs-comment">// 环形图自定义形状</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Animate</span> = <span class="hljs-variable constant_">G2</span>.<span class="hljs-property">Animate</span><br><br>   <span class="hljs-title class_">Shape</span>.<span class="hljs-title function_">registerShape</span>(<span class="hljs-string">&#x27;edge&#x27;</span>, <span class="hljs-string">&#x27;arc2&#x27;</span>, &#123;<br>     <span class="hljs-attr">draw</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">cfg, group</span>) &#123;<br><br>	<span class="hljs-comment">// 将0-1空间的坐标转换为画布坐标，this.parsePoint 真的太宝贵了，一般人找不到他</span><br>       <span class="hljs-keyword">const</span> center = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parsePoint</span>(&#123; <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> &#125;)<br><br>	<span class="hljs-comment">// 算出圆的最大半径</span><br>       <span class="hljs-keyword">const</span> R = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parsePoint</span>(&#123; <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> &#125;).<span class="hljs-property">y</span> - center.<span class="hljs-property">y</span><br>       <span class="hljs-keyword">const</span> lineWidth = <span class="hljs-number">5</span><br><br>       <span class="hljs-comment">//这边定义预设</span><br>       <span class="hljs-keyword">return</span> group.<span class="hljs-title function_">addShape</span>(<span class="hljs-string">&#x27;arc&#x27;</span>, &#123;<br>         <span class="hljs-attr">attrs</span>: &#123;<br>           <span class="hljs-attr">x</span>: center.<span class="hljs-property">x</span>,<br>           <span class="hljs-attr">y</span>: center.<span class="hljs-property">y</span>,<br>           <span class="hljs-attr">r</span>: (R + lineWidth),<br>           <span class="hljs-attr">startAngle</span>: (<span class="hljs-number">3</span> / <span class="hljs-number">4</span>) * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>,<br>           <span class="hljs-attr">endAngle</span>: (<span class="hljs-number">1</span> / <span class="hljs-number">4</span>) * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>,<br>           <span class="hljs-attr">stroke</span>: <span class="hljs-string">&#x27;#8B5EFF&#x27;</span>,<br>           lineWidth,<br>           <span class="hljs-attr">lineCap</span>: <span class="hljs-string">&#x27;round&#x27;</span><br>         &#125;<br>       &#125;)<br>     &#125;<br>   &#125;)<br></code></pre></td></tr></table></figure>

<ol>
<li><strong>新起一个chart，使用极坐标变换</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">G2</span>.<span class="hljs-title class_">Chart</span>(&#123;<br>  <span class="hljs-attr">container</span>: wrapEl,<br>  <span class="hljs-attr">forceFit</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">height</span>: <span class="hljs-number">60</span>,<br>  <span class="hljs-attr">padding</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>]<br>&#125;)<br><br>chart.<span class="hljs-title function_">source</span>(data)<br><br>chart.<span class="hljs-title function_">coord</span>(<span class="hljs-string">&#x27;polar&#x27;</span>, &#123;<br>  <span class="hljs-attr">startAngle</span>: (<span class="hljs-number">3</span> / <span class="hljs-number">4</span>) * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>,<br>  <span class="hljs-attr">endAngle</span>: (<span class="hljs-number">1</span> / <span class="hljs-number">4</span>) * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>,<br>  <span class="hljs-attr">radius</span>: <span class="hljs-number">0.85</span><br>&#125;)<br></code></pre></td></tr></table></figure>

<ol>
<li><strong>绘制灰色圆弧背景</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript">chart.<span class="hljs-title function_">guide</span>().<span class="hljs-title function_">arc</span>(&#123;<br>  <span class="hljs-attr">zIndex</span>: <span class="hljs-number">0</span>,<br>  <span class="hljs-attr">top</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">start</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0.945</span>],<br>  <span class="hljs-attr">end</span>: [<span class="hljs-number">100</span>, <span class="hljs-number">0.945</span>],<br>  <span class="hljs-attr">style</span>: &#123;<br>    <span class="hljs-comment">// 底灰色</span><br>    <span class="hljs-attr">stroke</span>: <span class="hljs-string">&#x27;#E5E5E5&#x27;</span>,<br>    <span class="hljs-attr">lineWidth</span>: <span class="hljs-title class_">Piechart</span>.<span class="hljs-property">lineWidth</span>,<br>    <span class="hljs-attr">lineCap</span>: <span class="hljs-string">&#x27;round&#x27;</span><br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<ol>
<li><strong>绘制显示的进度条并指定动画名称</strong></li>
</ol>
<p>这边有点坑，我们发现动画执行过程中只有动画完成时的callback，而antV同款可视化组件，<a target="_blank" rel="noopener" href="https://antv.alipay.com/zh-cn/f2/3.x/demo/gallery/simple-gauge.html">F2</a>则提供了update()的回调，这意味着增长的动画效果需要我们自己做。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript">chart<br>    .<span class="hljs-title function_">edge</span>()<br>    .<span class="hljs-title function_">shape</span>(<span class="hljs-string">&#x27;arc2&#x27;</span>)<br>    .<span class="hljs-title function_">position</span>(<span class="hljs-string">&#x27;value*1&#x27;</span>)<br>    .<span class="hljs-title function_">animate</span>(&#123;<br>      <span class="hljs-attr">appear</span>: &#123;<br>        <span class="hljs-attr">animation</span>: <span class="hljs-string">&#x27;stepPercent&#x27;</span>, <span class="hljs-comment">// 动画名称</span><br>        <span class="hljs-attr">easing</span>: <span class="hljs-string">&#x27;easeQuadInOut&#x27;</span>, <span class="hljs-comment">// 动画缓动效果</span><br>        <span class="hljs-attr">delay</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// 动画延迟执行时间</span><br>        <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-comment">// 动画执行时间</span><br>        <span class="hljs-title function_">callback</span>(<span class="hljs-params"></span>) &#123;<br>          <span class="hljs-comment">// console.log(&#x27;动画结束&#x27;)</span><br>        &#125;<br>      &#125;<br>    &#125;)<br>    .<span class="hljs-title function_">active</span>(<span class="hljs-literal">false</span>)<br>    .<span class="hljs-title function_">select</span>(<span class="hljs-literal">false</span>)<br></code></pre></td></tr></table></figure>

<ol>
<li><strong>注册一个增长动画效果的开始状态和结束状态</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 注册百分比动画</span><br><span class="hljs-title class_">Animate</span>.<span class="hljs-title function_">registerAnimation</span>(<span class="hljs-string">&#x27;appear&#x27;</span>, <span class="hljs-string">&#x27;stepPercent&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">shape, animateCfg</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> startAngle = shape.<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;startAngle&#x27;</span>)<br><br>  <span class="hljs-comment">// 设置初始状态</span><br>  shape.<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;endAngle&#x27;</span>, (-<span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>) + startAngle)<br><br>  <span class="hljs-keyword">const</span> endX = shape.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;origin&#x27;</span>).<span class="hljs-property">points</span>[<span class="hljs-number">0</span>].<span class="hljs-property">x</span><br>  shape.<span class="hljs-title function_">animate</span>(<br>    &#123;<br>      <span class="hljs-attr">endAngle</span>: ((<span class="hljs-number">3</span> / <span class="hljs-number">2</span>) * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * endX) - ((<span class="hljs-number">5</span> / <span class="hljs-number">4</span>) * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>)<br>    &#125;,<br>    animateCfg.<span class="hljs-property">duration</span>,<br>    animateCfg.<span class="hljs-property">easing</span>,<br>    animateCfg.<span class="hljs-property">callback</span>,<br>    animateCfg.<span class="hljs-property">delay</span><br>  )<br><br>  <span class="hljs-comment">//   console.log(&#x27;开始做动画&#x27;)</span><br>  $number = $(<span class="hljs-string">`#number-<span class="hljs-subst">$&#123;wrapEl&#125;</span>`</span>)<br>  <span class="hljs-title function_">gainPercent</span>()<br><br>&#125;)<br></code></pre></td></tr></table></figure>

<ol>
<li><strong>requestAnimationFrame注册的步进动画</strong></li>
</ol>
<p>因为电脑缘故，性能低下的CPU可能在1秒内执行不完60帧，所以使用<strong>requestAnimationFrame</strong>，另外因为 data[0].value &#x2F; 60 是个不精准的数值，所以会出现最后累加出现不等于传入值的情况，在最后一个次累加等于正常值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> $number<br><span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span><br><span class="hljs-keyword">const</span> gainPercent = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  i++<br>  <span class="hljs-comment">// 执行到最后一步强制拉到传入的最终值</span><br>  <span class="hljs-keyword">if</span> (i === <span class="hljs-number">60</span>) &#123;<br>    $number.<span class="hljs-title function_">text</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;data[<span class="hljs-number">0</span>].value&#125;</span>%`</span>)<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">const</span> step = data[<span class="hljs-number">0</span>].<span class="hljs-property">value</span> / <span class="hljs-number">60</span><br>    <span class="hljs-keyword">const</span> value = $number.<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;data-val&#x27;</span>)<br>    $number.<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;data-val&#x27;</span>, +value + step)<br>    $number.<span class="hljs-title function_">text</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;(+value + step).toString().split(<span class="hljs-string">&#x27;.&#x27;</span>)[<span class="hljs-number">0</span>]&#125;</span>%`</span>)<br>  &#125;<br><br>  <span class="hljs-comment">// console.log(`动画执行$&#123;i&#125;`, $number.attr(&#x27;data-val&#x27;))</span><br><br>  <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">60</span>) &#123;<br>    <span class="hljs-title function_">requestAnimationFrame</span>(gainPercent)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<p>完整示例：<a target="_blank" rel="noopener" href="https://codepen.io/danielchan27/pen/zYOppMZ">G2-Circle</a></p>
<h1 id="四、后记"><a href="#四、后记" class="headerlink" title="四、后记"></a>四、后记</h1><ol>
<li>选择可视化框架时按实现的简单程度：echart &gt; G2 &gt; D3 &gt; 原生</li>
<li>echart大而全，但是定制能力比较弱</li>
<li>G2适合实现一些本身就有的图表库，单独去定义自定义图形API和文档较少</li>
<li>G2的动画和联动能力较弱，推荐F2</li>
</ol>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Tech/" class="category-chain-item">Tech</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/G2/" class="print-no-link">#G2</a>
      
        <a href="/tags/Canvas/" class="print-no-link">#Canvas</a>
      
        <a href="/tags/SVG/" class="print-no-link">#SVG</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>G2实现大数据展示模块</div>
      <div>http://example.com/2019/09/05/G2实现大数据展示模块/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Daniel Chan</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2019年9月6日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/09/09/%E5%9F%BA%E4%BA%8E%E5%A4%9A%E9%A1%B5%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%94%B9%E9%80%A0/" title="基于多页项目的微前端改造">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">基于多页项目的微前端改造</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      var light = 'github-light';
      var dark = 'github-dark';
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema === 'dark') {
        schema = dark;
      } else {
        schema = light;
      }
      window.UtterancesThemeLight = light;
      window.UtterancesThemeDark = dark;
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'danni-cool/danni-cool');
      s.setAttribute('issue-term', 'pathname');
      
      s.setAttribute('label', 'Comment');
      
      s.setAttribute('theme', schema);
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    })
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
      
        <div class="copyright-info">All Copyright <a target="_blank" rel="noopener" href="//danni.cool">©️danni.cool</a> Reserved. 2019 - 2024</div>
      
      <ul class="footer-other-info"><li><i class="m-iconfont icon-link"></i><a href="/links">Friend Links</a></li></ul>
    </div>

  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>





  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
